Multiplayer=function(attached,callbacks,port,address){"use strict";var socket;if(typeof io==="undefined")throw'error: The script "socket.io.js" was not found or configured incorrectly.';if(typeof port==="object")socket=port;else{var uri=address||(location.protocol+"//"+location.hostname)+":"+(port||4000);socket=io.connect(uri)}socket.on("connect",function(){});socket.connect=function(attached){this.on("firstConnect",function(clients,myid){this.id=myid;this.clients=clients;for(var i in clients)if(clients.hasOwnProperty(i))this.onconnect(clients[i]);this.on("addClient",function(client){this.onconnect(client,this.clients.push(client)-1)});this.on("removeClient",function(client,id){if(id>=this.id)--id;this.ondisconnect(client,id);this.id=id<this.id?--this.id:this.id});this.on("RX",function(clients){clients.splice(this.id,1);this.clients=clients;this.emit("TX",this.me);this.onreceive(clients)})});this.me=this.me||attached;this.emit("firstConnect",this.me)};socket.version=5.0618121809;callbacks=callbacks||{};socket.clients=[];socket.me=socket.me||attached;if(socket.me)socket.connect();socket.update=function(attached){return socket.me=attached};socket.on("message",function(message,id){socket.onmessage(message,id>=socket.id?--id:id)});socket.options=socket.socket.options;socket.onconnect=socket.onconnect||callbacks.onconnect||function(client,id){};socket.ondisconnect=socket.ondisconnect||callbacks.ondisconnect||function(client,id){};socket.onreceive=socket.onreceive||callbacks.onreceive||function(clients){};socket.onmessage=socket.onmessage||callbacks.onmessage||function(message,id){};socket.s_eval=function(string){socket.emit("s_eval",string)};socket.c_eval=function(string){socket.emit("c_eval",string)};socket.on("c_eval",function(string){eval(string)});socket.ping=function(){socket.emit("ping",Date.now())};socket.ping();socket.on("ping",function(time){this.pingTime=Date.now()-time});return socket};